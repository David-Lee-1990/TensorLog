import sys
import time

import tensorlog
import expt
import declare
import mutil

if __name__=="__main__":
    
    ti = tensorlog.Interp(initFiles=['cancer-smokes.cfacts','friends.cfacts',
                                     'extras.cfacts','person.cfacts','smokers.ppr'])
    rows = []
    for line in open('query-entities.txt'):
        sym = line.strip()
        rows.append(ti.db.onehot(sym))
    X = mutil.stack(rows)

    #for modeString in ["t_stress/io", "t_influences/io","t_cancer_spont/io", "t_cancer_smoke/io"]:
    for modeString in ["t_stress/io", "t_cancer_spont/io", "t_cancer_smoke/io"]:
        print 'eval',modeString,
        start = time.time()
        ti.prog.eval(ti._asMode(modeString), [X])
    print 'time',time.time() - start,'sec'
    
    ti.list("t_influences/io")
    ti.prog.eval(ti._asMode("t_influences/io"), [X])


